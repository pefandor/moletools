---
interface Props {
  name: string;
  description: string;
  icon: string;
  category: string;
  path: string;
}

const { name, description, icon, category, path } = Astro.props;

// Category colors
const categoryColors: Record<string, { bg: string; text: string; border: string }> = {
  'Formatter': { bg: 'bg-emerald-100 dark:bg-emerald-900/30', text: 'text-emerald-700 dark:text-emerald-400', border: 'border-emerald-600' },
  'Encoder': { bg: 'bg-violet-100 dark:bg-violet-900/30', text: 'text-violet-700 dark:text-violet-400', border: 'border-violet-600' },
  'Generator': { bg: 'bg-amber-100 dark:bg-amber-900/30', text: 'text-amber-700 dark:text-amber-400', border: 'border-amber-600' },
  'Converter': { bg: 'bg-blue-100 dark:bg-blue-900/30', text: 'text-blue-700 dark:text-blue-400', border: 'border-blue-600' },
};

const colors = categoryColors[category] || categoryColors['Generator'];
---

<a
  href={path}
  data-tool-path={path}
  class={`block relative bg-white dark:bg-gray-800 rounded-lg shadow-sm hover:shadow-lg transition-all duration-200 p-6 border-l-4 border-t border-r border-b border-gray-200 dark:border-gray-700 hover:-translate-y-1 tool-card ${colors.border}`}
>
  <button
    class="fav-btn absolute top-2 right-2 w-7 h-7 flex items-center justify-center rounded-full opacity-0 group-hover:opacity-100 transition-opacity text-gray-400 hover:text-amber-500 dark:text-gray-500 dark:hover:text-amber-400"
    data-fav-path={path}
    aria-label="Toggle favorite"
  >
    <svg class="w-4 h-4 fav-icon-outline" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M11.049 2.927c.3-.921 1.603-.921 1.902 0l1.519 4.674a1 1 0 00.95.69h4.915c.969 0 1.371 1.24.588 1.81l-3.976 2.888a1 1 0 00-.363 1.118l1.518 4.674c.3.922-.755 1.688-1.538 1.118l-3.976-2.888a1 1 0 00-1.176 0l-3.976 2.888c-.783.57-1.838-.197-1.538-1.118l1.518-4.674a1 1 0 00-.363-1.118l-3.976-2.888c-.784-.57-.38-1.81.588-1.81h4.914a1 1 0 00.951-.69l1.519-4.674z"/></svg>
    <svg class="w-4 h-4 fav-icon-filled hidden" fill="currentColor" viewBox="0 0 24 24"><path d="M11.049 2.927c.3-.921 1.603-.921 1.902 0l1.519 4.674a1 1 0 00.95.69h4.915c.969 0 1.371 1.24.588 1.81l-3.976 2.888a1 1 0 00-.363 1.118l1.518 4.674c.3.922-.755 1.688-1.538 1.118l-3.976-2.888a1 1 0 00-1.176 0l-3.976 2.888c-.783.57-1.838-.197-1.538-1.118l1.518-4.674a1 1 0 00-.363-1.118l-3.976-2.888c-.784-.57-.38-1.81.588-1.81h4.914a1 1 0 00.951-.69l1.519-4.674z"/></svg>
  </button>
  <div class="flex items-start space-x-4">
    <div class="text-4xl">{icon}</div>
    <div class="flex-1">
      <div class="flex items-center justify-between">
        <h3 class="text-lg font-semibold text-gray-900 dark:text-gray-100">{name}</h3>
        <span class={`text-xs font-medium px-2.5 py-0.5 rounded-full ${colors.bg} ${colors.text}`}>
          {category}
        </span>
      </div>
      <p class="mt-1 text-sm text-gray-600 dark:text-gray-400">{description}</p>
    </div>
  </div>
</a>

<style>
  .tool-card {
    border-left-width: 4px;
    position: relative;
  }
  .tool-card .fav-btn {
    opacity: 0;
    transition: opacity 0.2s, color 0.2s;
  }
  .tool-card:hover .fav-btn {
    opacity: 1;
  }
  .tool-card .fav-btn.is-fav {
    opacity: 1;
    color: #F59E0B;
  }

  .tool-card.border-emerald-600 {
    border-left-color: #059669;
  }

  .tool-card.border-violet-600 {
    border-left-color: #7C3AED;
  }

  .tool-card.border-amber-600 {
    border-left-color: #D97706;
  }

  .tool-card.border-blue-600 {
    border-left-color: #2563EB;
  }
</style>

<style is:global>
  /* Category-tinted hover shadows in dark mode */
  .dark .tool-card.border-emerald-600:hover {
    box-shadow: 0 8px 20px -3px rgba(5, 150, 105, 0.4), 0 0 15px rgba(5, 150, 105, 0.15), 0 4px 6px -2px rgba(0, 0, 0, 0.3);
    border-left-color: #10B981;
  }
  .dark .tool-card.border-violet-600:hover {
    box-shadow: 0 8px 20px -3px rgba(124, 58, 237, 0.4), 0 0 15px rgba(124, 58, 237, 0.15), 0 4px 6px -2px rgba(0, 0, 0, 0.3);
    border-left-color: #8B5CF6;
  }
  .dark .tool-card.border-amber-600:hover {
    box-shadow: 0 8px 20px -3px rgba(217, 119, 6, 0.4), 0 0 15px rgba(217, 119, 6, 0.15), 0 4px 6px -2px rgba(0, 0, 0, 0.3);
    border-left-color: #F59E0B;
  }
  .dark .tool-card.border-blue-600:hover {
    box-shadow: 0 8px 20px -3px rgba(37, 99, 235, 0.4), 0 0 15px rgba(37, 99, 235, 0.15), 0 4px 6px -2px rgba(0, 0, 0, 0.3);
    border-left-color: #3B82F6;
  }
</style>
